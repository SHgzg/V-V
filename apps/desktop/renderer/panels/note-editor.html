<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ç¬”è®°ç¼–è¾‘å™¨</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: Arial, "Helvetica Neue", Helvetica, sans-serif;
      background: white;
      height: 100vh;
      overflow: hidden;
    }

    .panel-header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 12px 16px;
      font-size: 14px;
      font-weight: 600;
      display: flex;
      align-items: center;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
    }

    .panel-header-icon {
      margin-right: 10px;
      font-size: 18px;
    }

    .editor-container {
      height: calc(100vh - 45px);
      display: flex;
      flex-direction: column;
    }

    .editor-toolbar {
      padding: 8px 12px;
      background: #f8f9fa;
      border-bottom: 1px solid #e0e0e0;
      display: flex;
      gap: 6px;
      align-items: center;
    }

    .toolbar-btn {
      background: white;
      border: 1px solid #d0d0d0;
      padding: 6px 12px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 12px;
      color: #444;
      transition: all 0.2s;
      font-weight: 500;
    }

    .toolbar-btn:hover {
      background: #1890ff;
      color: white;
      border-color: #1890ff;
    }

    .toolbar-btn.active {
      background: #1890ff;
      color: white;
      border-color: #1890ff;
    }

    .editor-content {
      flex: 1;
      overflow: hidden;
      position: relative;
    }

    .editor-textarea {
      width: 100%;
      height: 100%;
      border: none;
      outline: none;
      resize: none;
      font-size: 14px;
      line-height: 1.7;
      color: #444;
      font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
      padding: 20px;
      background: #fafafa;
    }

    .status-bar {
      padding: 6px 12px;
      background: #f8f9fa;
      border-top: 1px solid #e0e0e0;
      font-size: 11px;
      color: #666;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .status-item {
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .status-label {
      font-weight: 500;
      color: #999;
    }

    /* å·¥å…·æ åˆ†éš”ç¬¦ */
    .toolbar-divider {
      width: 1px;
      height: 20px;
      background: #d0d0d0;
      margin: 0 4px;
    }

    /* æ»šåŠ¨æ¡ */
    ::-webkit-scrollbar {
      width: 8px;
    }

    ::-webkit-scrollbar-track {
      background: #f1f1f1;
    }

    ::-webkit-scrollbar-thumb {
      background: #c1c1c1;
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: #a1a1a1;
    }
  </style>
</head>
<body>
  <div class="panel-header">
    <span class="panel-header-icon">ğŸ“</span>
    <span>ç¬”è®°ç¼–è¾‘å™¨</span>
  </div>

  <div class="editor-container">
    <div class="editor-toolbar">
      <button class="toolbar-btn" onclick="formatText('bold')" title="ç²—ä½“">ğ›</button>
      <button class="toolbar-btn" onclick="formatText('italic')" title="æ–œä½“">ğ¼</button>
      <button class="toolbar-btn" onclick="formatText('heading')" title="æ ‡é¢˜">H</button>
      <div class="toolbar-divider"></div>
      <button class="toolbar-btn" onclick="formatText('link')" title="é“¾æ¥">ğŸ”—</button>
      <button class="toolbar-btn" onclick="formatText('list')" title="åˆ—è¡¨">â‰£</button>
      <div class="toolbar-divider"></div>
      <button class="toolbar-btn" onclick="clearEditor()" title="æ¸…ç©º">ğŸ—‘ï¸</button>
    </div>

    <div class="editor-content">
      <textarea class="editor-textarea" id="editor" placeholder="# å¼€å§‹ç¼–å†™ä½ çš„ç¬”è®°..."># æ¬¢è¿ä½¿ç”¨ç¬”è®°ç¼–è¾‘å™¨

è¿™æ˜¯ä¸€ä¸ªæ”¯æŒ **Markdown** çš„ç¼–è¾‘å™¨ã€‚

## åŠŸèƒ½ç‰¹ç‚¹

- å®æ—¶ç¼–è¾‘
- å¿«æ·æ ¼å¼åŒ–
- ç®€æ´çš„ç•Œé¢

## å¿«æ·æ“ä½œ

1. ç‚¹å‡»å·¥å…·æ æŒ‰é’®å¿«é€Ÿæ ¼å¼åŒ–æ–‡æœ¬
2. æ”¯æŒå¸¸ç”¨çš„ Markdown è¯­æ³•
3. è‡ªåŠ¨ä¿å­˜è‰ç¨¿

## å¼€å§‹ä½¿ç”¨

åœ¨å³ä¾§é¢æ¿æ‰“å¼€é¢„è§ˆï¼Œå¯ä»¥çœ‹åˆ° Markdown çš„æ¸²æŸ“æ•ˆæœã€‚
</textarea>
    </div>

    <div class="status-bar">
      <div class="status-item">
        <span class="status-label">è¡Œ:</span>
        <span id="line-col">1:1</span>
      </div>
      <div class="status-item">
        <span class="status-label">å­—ç¬¦:</span>
        <span id="char-count">0</span>
      </div>
      <div class="status-item">
        <span class="status-label">è¯æ•°:</span>
        <span id="word-count">0</span>
      </div>
    </div>
  </div>

  <script>
    const editor = document.getElementById('editor')
    const lineCol = document.getElementById('line-col')
    const charCount = document.getElementById('char-count')
    const wordCount = document.getElementById('word-count')

    // æ›´æ–°å…‰æ ‡ä½ç½®
    function updateCursorPosition() {
      const text = editor.value.substring(0, editor.selectionStart)
      const lines = text.split('\n')
      const line = lines.length
      const col = lines[lines.length - 1].length + 1
      lineCol.textContent = `${line}:${col}`
    }

    // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
    function updateStats() {
      const text = editor.value
      charCount.textContent = text.length
      
      const words = text.trim().split(/\s+/).filter(w => w.length > 0)
      wordCount.textContent = words.length
    }

    // æ ¼å¼åŒ–æ–‡æœ¬
    function formatText(type) {
      const start = editor.selectionStart
      const end = editor.selectionEnd
      const selectedText = editor.value.substring(start, end)

      let newText = ''
      switch (type) {
        case 'bold':
          newText = `**${selectedText || 'ç²—ä½“æ–‡æœ¬'}**`
          break
        case 'italic':
          newText = `*${selectedText || 'æ–œä½“æ–‡æœ¬'}*`
          break
        case 'heading':
          newText = `## ${selectedText || 'æ ‡é¢˜'}`
          break
        case 'link':
          newText = `[${selectedText || 'é“¾æ¥æ–‡æœ¬'}](url)`
          break
        case 'list':
          newText = `- ${selectedText || 'åˆ—è¡¨é¡¹'}`
          break
      }

      editor.value = editor.value.substring(0, start) + newText + editor.value.substring(end)
      editor.focus()
      updateStats()
    }

    // æ¸…ç©ºç¼–è¾‘å™¨
    function clearEditor() {
      if (editor.value && !confirm('ç¡®å®šè¦æ¸…ç©ºç¼–è¾‘å™¨å—ï¼Ÿ')) {
        return
      }
      editor.value = ''
      updateStats()
    }

    editor.addEventListener('input', () => {
      updateStats()
      updateCursorPosition()
    })
    editor.addEventListener('click', updateCursorPosition)
    editor.addEventListener('keyup', updateCursorPosition)

    // åˆå§‹åŒ–
    updateStats()
    console.log('[NoteEditor] Loaded')
  </script>
</body>
</html>
